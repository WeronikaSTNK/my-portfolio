

import React, { useState, useEffect } from 'react';
import content from '../content.json';
import Header from './Header';
import About from './About';
import Footer from './Footer';
import Skills from './Skills'
import Contact from './Contact';



export const Portfolio = (content) => {

  const [language, setLanguage] = useState('pl')
  const [content, setContent] = useState({})
  const [mobile, setMobile] = useState(true)
  const [scrollY, setScrollY] = useState(0)

let data = require('../content/json')


console.log(content)
  const getData = (lang = 'pl') => {
    const translation = content.filter(element => element.language === lang);
    setContent({ content: translation[0] });

  };
const checkDevice=() => {
    const deviceWidth = window.innerWidth > 0 ? window.innerWidth : '640';
    const deviceHeight = window.innerHeight > 0 ? window.innerHeight : '360';

    if (deviceHeight >= 768 && deviceWidth >= 1024) {
      setMobile( false);
    } else {
      setMobile(true);
    }
  }

const   naviHandler = e => {
    if (
      e.target.className === 'naviBurger' ||
      e.target.className === 'naviBurgerSpan' ||
      e.target.className.includes('naviListButton')
    ) {
      document.querySelector('.navigation').classList.toggle('active');
    }
  };
 const langHandler = e => {
    const language = e.target.value;
    setLanguage( language );
  };

  const handleScroll = e => {
    const scrollY = window.scrollY;
    setScrollY( scrollY );
  };

useEffect(() => {
  getData();
  checkDevice()
  window.addEventListener('scroll', handleScroll);
}, [handleScroll])

useEffect(() => {
 if (language !== content.language) {
      getData(language);
    }
}, [content.language, getData])

  return (
          <>
        <Header />
        <main>
        <About content={content} scrollY={scrollY} />
        <Skills content={content} scrollY={scrollY}/>
        <Contact content={content} scrollY={scrollY} language={language}/>
        </main>
        < Footer />
      </>
  )
}
export default Portfolio
